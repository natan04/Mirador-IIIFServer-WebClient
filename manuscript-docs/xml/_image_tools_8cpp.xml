<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.8">
  <compounddef id="_image_tools_8cpp" kind="file">
    <compoundname>ImageTools.cpp</compoundname>
    <includes refid="stdafx_8h" local="yes">stdafx.h</includes>
    <includes refid="_image_tools_8h" local="yes">ImageTools.h</includes>
    <incdepgraph>
      <node id="683">
        <label>opencv/cv.h</label>
      </node>
      <node id="685">
        <label>ConnectedComponent.h</label>
        <link refid="_connected_component_8h"/>
        <childnode refid="675" relation="include">
        </childnode>
        <childnode refid="673" relation="include">
        </childnode>
        <childnode refid="686" relation="include">
        </childnode>
      </node>
      <node id="667">
        <label>SDKDDKVer.h</label>
      </node>
      <node id="684">
        <label>opencv2/core/core.hpp</label>
      </node>
      <node id="680">
        <label>ImageConverter.h</label>
        <link refid="_image_converter_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="677" relation="include">
        </childnode>
      </node>
      <node id="673">
        <label>string</label>
      </node>
      <node id="682">
        <label>ComponentExtractor.h</label>
        <link refid="_component_extractor_8h"/>
        <childnode refid="683" relation="include">
        </childnode>
        <childnode refid="684" relation="include">
        </childnode>
        <childnode refid="685" relation="include">
        </childnode>
      </node>
      <node id="686">
        <label>Contour.h</label>
        <link refid="_contour_8h"/>
        <childnode refid="675" relation="include">
        </childnode>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="687" relation="include">
        </childnode>
      </node>
      <node id="671">
        <label>opencv\cv.h</label>
      </node>
      <node id="679">
        <label>ImageEnhancer.h</label>
        <link refid="_image_enhancer_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="677" relation="include">
        </childnode>
      </node>
      <node id="665">
        <label>stdafx.h</label>
        <link refid="stdafx_8h"/>
        <childnode refid="666" relation="include">
        </childnode>
        <childnode refid="668" relation="include">
        </childnode>
        <childnode refid="669" relation="include">
        </childnode>
      </node>
      <node id="689">
        <label>Feature.h</label>
        <link refid="_feature_8h"/>
      </node>
      <node id="664">
        <label>ManuscriptApp/ImageTools.cpp</label>
        <link refid="ImageTools.cpp"/>
        <childnode refid="665" relation="include">
        </childnode>
        <childnode refid="670" relation="include">
        </childnode>
      </node>
      <node id="675">
        <label>vector</label>
      </node>
      <node id="688">
        <label>FeatureExtractor.h</label>
        <link refid="_feature_extractor_8h"/>
        <childnode refid="683" relation="include">
        </childnode>
        <childnode refid="684" relation="include">
        </childnode>
        <childnode refid="689" relation="include">
        </childnode>
      </node>
      <node id="681">
        <label>ImageProjector.h</label>
        <link refid="_image_projector_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="677" relation="include">
        </childnode>
      </node>
      <node id="672">
        <label>opencv2/highgui/highgui.hpp</label>
      </node>
      <node id="674">
        <label>DImage.h</label>
        <link refid="_d_image_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="672" relation="include">
        </childnode>
        <childnode refid="675" relation="include">
        </childnode>
        <childnode refid="676" relation="include">
        </childnode>
        <childnode refid="678" relation="include">
        </childnode>
        <childnode refid="679" relation="include">
        </childnode>
        <childnode refid="680" relation="include">
        </childnode>
        <childnode refid="681" relation="include">
        </childnode>
        <childnode refid="682" relation="include">
        </childnode>
        <childnode refid="688" relation="include">
        </childnode>
      </node>
      <node id="670">
        <label>ImageTools.h</label>
        <link refid="_image_tools_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="672" relation="include">
        </childnode>
        <childnode refid="673" relation="include">
        </childnode>
        <childnode refid="674" relation="include">
        </childnode>
      </node>
      <node id="669">
        <label>tchar.h</label>
      </node>
      <node id="676">
        <label>ImageFilter.h</label>
        <link refid="_image_filter_8h"/>
        <childnode refid="677" relation="include">
        </childnode>
      </node>
      <node id="666">
        <label>targetver.h</label>
        <link refid="targetver_8h"/>
        <childnode refid="667" relation="include">
        </childnode>
      </node>
      <node id="668">
        <label>stdio.h</label>
      </node>
      <node id="677">
        <label>imageoperator.h</label>
        <link refid="_image_operator_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
      </node>
      <node id="687">
        <label>opencv2\core\core.hpp</label>
      </node>
      <node id="678">
        <label>ImageBinarizer.h</label>
        <link refid="_image_binarizer_8h"/>
        <childnode refid="671" relation="include">
        </childnode>
        <childnode refid="677" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="stdafx_8h" kindref="compound">stdafx.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_image_tools_8h" kindref="compound">ImageTools.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal">cv::Point2f<sp/><ref refid="namespace_image_tools_1aef9fa361958e089c60e33af0e1ae96c4" kindref="member">ImageTools::centerOfMass</ref>(cv::Mat<sp/>mat){</highlight></codeline>
<codeline lineno="6"><highlight class="normal"><sp/><sp/><sp/><sp/>cv::Point2f<sp/>center(0,0);</highlight></codeline>
<codeline lineno="7"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sum<sp/>=<sp/>0<sp/>;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0<sp/>;<sp/>i<sp/>&lt;<sp/>mat.rows<sp/>;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0<sp/>;<sp/>j<sp/>&lt;<sp/>mat.cols<sp/>;<sp/>j++<sp/>){</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>s<sp/>=<sp/>mat.at&lt;uchar&gt;(i,j)<sp/>;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>s2<sp/>=<sp/>s*s<sp/>;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sum<sp/>+=<sp/>s2<sp/>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>center.y<sp/>+=<sp/>(i<sp/>*<sp/>s2<sp/>)<sp/><sp/>;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>center.x<sp/>+=<sp/>(j<sp/>*<sp/>s2<sp/>)<sp/>;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>center.x<sp/>/=<sp/>sum<sp/>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/>center.y<sp/>/=<sp/>sum<sp/>;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>center<sp/>;</highlight></codeline>
<codeline lineno="20"><highlight class="normal">}</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal">cv::Mat<sp/><ref refid="namespace_image_tools_1aef7ccc5ec3cb576256506b6539f5ad6e" kindref="member">ImageTools::varianceAroundPoint</ref>(cv::Mat<sp/>m,<sp/>cv::Point2f<sp/>point){</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/>cv::Mat<sp/>variance(m.cols<sp/>*<sp/>m.rows,<sp/>2,<sp/>CV_32F);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>idx<sp/>=<sp/>0<sp/>;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0<sp/>;<sp/>i<sp/>&lt;<sp/>m.rows<sp/>;<sp/>i++)<sp/></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0<sp/>;<sp/>j<sp/>&lt;<sp/>m.cols<sp/>;<sp/>j++<sp/>){</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>s<sp/>=<sp/>m.at&lt;uchar&gt;(i,j)<sp/>;</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>variance.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(idx,<sp/>0)<sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(<sp/>i<sp/>-<sp/>point.y)<sp/>*<sp/>s<sp/>;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>variance.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(idx,<sp/>1)<sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)(<sp/>j<sp/>-<sp/>point.x)<sp/>*<sp/>s<sp/>;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>idx++<sp/>;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>variance<sp/>;</highlight></codeline>
<codeline lineno="33"><highlight class="normal">}</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><ref refid="namespace_image_tools_1ab9b6e111b7139dcff8b2b04b0f36d1a1" kindref="member">ImageTools::Orientation</ref><sp/><ref refid="namespace_image_tools_1ab6bb0f737969195fcfceb4723bf474ea" kindref="member">ImageTools::orientation</ref>(cv::Mat<sp/>mat,<sp/>cv::Point2f<sp/>&amp;com){</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>std::pair&lt;cv::Point2f,<sp/>cv::Point2f&gt;<sp/>orient<sp/>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>cv::Mat<sp/>covariance,<sp/>variance,<sp/>eigen_vals,<sp/>eigen_vects<sp/>;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>com<sp/>=<sp/><ref refid="namespace_image_tools_1aef9fa361958e089c60e33af0e1ae96c4" kindref="member">centerOfMass</ref>(mat);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>variance<sp/>=<sp/><ref refid="namespace_image_tools_1aef7ccc5ec3cb576256506b6539f5ad6e" kindref="member">varianceAroundPoint</ref>(mat,<sp/>com);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>covariance<sp/>=<sp/>variance.t()<sp/>*<sp/>variance<sp/>;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//std::cout<sp/>&lt;&lt;<sp/>&quot;CoVariance:<sp/>&quot;<sp/>&lt;&lt;<sp/>covariance<sp/>&lt;&lt;<sp/>std::endl<sp/>;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>cv::eigen(covariance,<sp/>eigen_vals,<sp/>eigen_vects);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//std::cout<sp/>&lt;&lt;<sp/>eigen_vects<sp/>&lt;&lt;<sp/>std::endl<sp/>;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>orient.first<sp/><sp/>=<sp/>cv::Point2f(eigen_vects.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(0,0),<sp/>eigen_vects.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(0,1))<sp/>;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>orient.second<sp/>=<sp/>cv::Point2f(eigen_vects.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(1,0),<sp/>eigen_vects.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(1,1))<sp/>;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>orient<sp/>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><sp/><ref refid="namespace_image_tools_1af76b41d3be28c818faf2a9ec1e3d3bb1" kindref="member">ImageTools::smoothColumn</ref>(cv::Mat<sp/>mat,<sp/>cv::Mat<sp/>filter,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>col_idx){</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>cv::Mat<sp/>dest<sp/>=<sp/>cv::Mat(mat);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>offset<sp/>=<sp/>(filter.rows-1)/2<sp/>;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>offset<sp/>;<sp/>i<sp/>&lt;<sp/>mat.rows<sp/>-<sp/>offset<sp/>;<sp/>i++<sp/>){</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cv::Mat<sp/>m<sp/>=<sp/>mat(cv::Range(i-offset,<sp/>i+offset+1),cv::Range(col_idx,<sp/>col_idx+1))<sp/>;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//std::cout<sp/>&lt;&lt;<sp/>&quot;Mat:<sp/>&quot;<sp/>&lt;&lt;<sp/>m<sp/>&lt;&lt;<sp/>&quot;<sp/>Filter:<sp/>&quot;<sp/>&lt;&lt;<sp/>filter<sp/>&lt;&lt;<sp/>std::endl<sp/>;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>sum<sp/>=<sp/>m.dot(filter);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>mat.depth()<sp/>==<sp/>1<sp/>)</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest.at&lt;uchar&gt;(i,<sp/>col_idx)<sp/>=<sp/>(uchar)sum<sp/>;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest.at&lt;</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">&gt;(i,<sp/>col_idx)<sp/>=<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)sum<sp/>;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>dest.copyTo(mat);</highlight></codeline>
<codeline lineno="62"><highlight class="normal">}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespace_image_tools" kindref="compound">ImageTools</ref>::<ref refid="namespace_image_tools_1a45492e740afde5d3482a71d5cee9842b" kindref="member">display</ref>(String<sp/>win,<sp/><ref refid="class_d_image" kindref="compound">DImage</ref>&amp;<sp/>img){</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>namedWindow(win,<sp/>cv::WINDOW_NORMAL);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(win,<sp/>img.getMat());</highlight></codeline>
<codeline lineno="67"><highlight class="normal">}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespace_image_tools_1a45492e740afde5d3482a71d5cee9842b" kindref="member">ImageTools::display</ref>(String<sp/>win,<sp/>Mat&amp;<sp/>img){</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/>namedWindow(win,<sp/>cv::WINDOW_NORMAL);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(win,<sp/>img);</highlight></codeline>
<codeline lineno="72"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/Users/roykalony/Documents/workspace/manuscript-project/manuscriptvc/ManuscriptApp/ImageTools.cpp"/>
  </compounddef>
</doxygen>
